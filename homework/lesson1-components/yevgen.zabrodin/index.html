<!DOCTYPE html>
<html ng-app="userCards">

<head>
  <meta charset="UTF-8">
  <title>Карточки пользователей</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <add-user></add-user>
        <user-card></user-card>
      </div>
    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.min.js"></script>
  <script>
    'use strict'

    let app = angular.module('userCards', []);

    // user card start
    app.component('userCard',  {

        templateUrl: 'user-card.html',

        controller: function () {

          this.showUsers         = false;
          this.showOnlyWithPhoto = false;
          this.addingUsers       = false;
          this.debugMode         = false;
          this.users = [
            {"birthdayDate":"2000-01-31T22:00:00.000Z",
            "sex":"М",
            "firstName":"Евгений",
            "lastName":"Семенов",
            "address":"10 Апреля",
            "email":"iivanov@gmail.com",
            "avatar":"","photoId":47} , 
            {"birthdayDate":"2000-01-31T22:00:00.000Z",
            "sex":"М",
            "firstName":"Семен",
            "lastName":"Иванов",
            "address":"10 Апреля",
            "email":"iivanov@gmail.com",
            "avatar":"","photoId":45},
            {"birthdayDate":"2000-01-31T22:00:00.000Z",
            "sex":"М",
            "firstName":"Иван",
            "lastName":"Иванов",
            "address":"10 Апреля",
            "email":"iivanov@gmail.com",
            "avatar":"","photoId":46}
            ,
            {"birthdayDate":"2000-01-31T22:00:00.000Z",
            "sex":"М",
            "firstName":"Иван",
            "lastName":"Иванов",
            "address":"10 Апреля",
            "email":"iivanov@gmail.com",
            "avatar":"","photoId":undefined}
            ,
            {"birthdayDate":"2000-01-31T22:00:00.000Z",
            "sex":"М",
            "firstName":"Иван",
            "lastName":"Иванов",
            "address":"10 Апреля",
            "email":"iivanov@gmail.com",
            "avatar":"","photoId":0}

            ] ;

          this.user = {
            birthdayDate: '',
            sex: '',
            firstName: '',
            lastName: '',
            address: '',
            email: '',
            avatar : '',
            photoId : '',
          };

          this.isUserVisible = (user) => {
            // console.log(user);
            if ( this.showOnlyWithPhoto ){              
              var flag = ! ( user.photoId === undefined || user.photoId === 0 );
              console.log(flag);
              return flag;
            } else {
              return true;
            }
            
          }

          this.markCard = (event) => {
              // console.log(event);
              if ( event.target.style.backgroundColor === "red" ) {
                event.target.style.backgroundColor = "white"
              } else {
                event.target.style.backgroundColor = "red"
              }
              
              // event.target.style.backgroundColor = "red";
          }

          this.addUser = () => {
              this.users.push(this.user);

              for (var key in Object.keys(this.user) ) {
                console.log(this.user[key]);
              }
          };}
      });// user card end

      app.component("avatar" , {
        bindings:{
          user : '<'
        },
        templateUrl:"avatar.html",
      });

  </script>


</body>

</html>